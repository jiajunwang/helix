# Verify if the PR meets all the requirements for merging on PR review event.

name: PR Pre-merge Check

on:
  pull_request:
    types: [edited]
  pull_request_review:
    types: [submitted]

jobs:
  validate_PR:

    runs-on: ubuntu-latest

    steps:
      - name: Dump GitHub context1
        env:
          BODY: ${{ toJson(github.event.pull_request.body) }}
        run: echo "$BODY"
      - name: Dump GitHub context2
        env:
          STATE: ${{ toJson(github.event.pull_request.state) }}
        run: echo "$STATE"
      - name: Validate if the PR is ready to be merged.
        run: echo "Ready!"
        if: ${{ contains(github.event.pull_request.body, '[ ]') && (github.event.pull_request.state == 'APPROVED') }}
